<!DOCTYPE HTML>
<html>
  
<head>
  <!-- Encoding -->
  <meta charset="UTF-8">
  <link rel="icon" href="/favicon.ico">
  <!-- Meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Joseph Curtin - Mindful communication & software engineering" />
  <meta name="keywords" content="Machine Learning, Infrastructure, & Cloud" />
  <meta name="author" content="Joseph Curtin's Website" />
  <title>
    ECharts TreeMap &amp; Zola
    </title>
  <!-- Imports -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bulma@1.0.0/css/bulma.min.css"
    integrity="sha256-nQ6wLtrBdTlYGKygEWcUZItTqIGXhUmg2m34X4ZPXaQ="
    crossorigin="anonymous"/>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer" />
  <!-- <link rel="stylesheet" href="/main.css" crossorigin="anonymous" /> -->
  <link rel="stylesheet" href="https://ender.yoga/main.css">
  <script type="text/javascript" src="https://ender.yoga/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>

  <body>
    <section class="columns">
      <div class="column is-3">
        
<div class="has-text-right page-title-column">
  <a href="/">
    <h1 class="page-title title is-2 has-text-primary"> Joseph Curtin </h1>
    <p class="page-subtitle subtitle is-6 vert-spacing"> Mindful communication & software engineering </p>
  </a>
  <!-- <hr class="title-divider" /> -->
  <section class="vert-spacing">
    <div class="equal-height">
      <div class="card-content is-flex" style="justify-content: center;">
        <figure class="image is-64x64 is-center">
          <img src="/images/profile.svg" alt="Brain" />
        </figure>
      </div>
    </div>
  </section>
  <section class="section" style="padding: 0;">
    <ul class="buttons">
      <li>
  <div id="subscribe-field" class="field has-addons">
    <div class="control has-icons-left has-icons-right">
      <input class="input" name="subscribe-email" type="email" placeholder="your@email.here to subscribe" />
      <span class="icon is-small is-left has-site-colors">
        <i class="fa-regular fa-newspaper"></i>
      </span>
      <span class="icon is-small is-right has-site-colors">
        <i class="fas fa-check"></i>
      </span>
    </div>
    <div id="subscribe-button" class="control">
      <button class="button has-site-colors">
        Subscribe
      </button>
    </div>
    <p class="note help is-danger" style="text-align: left;"> Invalid Email </p>
  </div>
</li>

      <li>
        <a href="mailto:be@ender.yoga" target="_blank" class="button">
          <span class="has-site-colors"> Connect over Email </span>
          <span class="icon is-medium has-site-colors">
            <i class="fa-regular fa-envelope"></i>
          </span>
        </a>
      </li>
      <li>
        <a href="/ja&#x2F;articles&#x2F;tree-map&#x2F;" class="button">
        <span class="has-site-colors">
            English&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <i class="fa-solid fa-language"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            日本語
          </span>
        </a>
      </li>
    </ul>
  </section>
</div>

        <div class="container">
          <aside class="menu hide-on-mobile">
            
<p class="menu-label">Search</p>
<ul class="menu-list">
  <li>
    <div class="field">
      <div class="control has-icons-left has-icons-right">
        <input id="aside-search-input" class="input" type="text" placeholder="Search Articles" value="">
        <span class="icon is-small is-left">
          <i class="fa-solid fa-magnifying-glass"></i>
        </span>
        <span class="icon is-small is-right">
          <i class="fas fa-close"></i>
        </span>
      </div>
    </div>
  </li>
</ul>

            
<p class="menu-label">Article Filters</p>
<ul class="menu-list">


  <li>
    <a href="&#x2F;articles&#x2F;">Performance Analysis</a>
  </li>

</ul>

          </aside>
        </div>
      </div>
      <div class="column is-9">
        <article class="content">
          <header class="main-top">
            <h1 class="page-title title is-2 has-text-primary"> ECharts TreeMap &amp; Zola </h1>
            <p class="subtitle is-6">
              <time datetime="2024-12-11"> December 11, 2024 </time>
            </p>
          </header>
          <section class="content">
            <p>
              <p>I've been working on hierarchical lists of cryptographic algorithms and technology frameworks in my spare time and have been spending a considerable amount of time on how to present the information. As much as I like tech data, I don't think the information would be digested well enough using just text. A TreeMap seemed appropriate because I'd like to show/indicate the structure of understanding the information along with the attributes that go along with the information</p>
<div id="first-map-chart" style="width: 90%; min-height: 200px; margin-bottom: 10px;"></div>
<script id="first-map-template" type="text/template">
- Root
  - Backend Framework
    - Django
    - Rocket.rs
  - Frontend Framework
    - VueJS
    - ReactJS
</script>
<script type="text/javascript">
  $(document).ready(async function() {
    $('#first-map-chart').Chart__TreeMap('first-map-template');
  })
</script>
<p><a rel="noopener" target="_blank" href="https://echarts.apache.org/en/index.html">echarts</a> provides one of the best <a rel="noopener" target="_blank" href="https://www.typescriptlang.org/">TypeScript</a> APIs I've had the good fortune to encounter for charting. <a rel="noopener" target="_blank" href="https://www.getzola.org/">Zola</a> offers an API called <a rel="noopener" target="_blank" href="https://www.getzola.org/documentation/content/shortcodes/">ShortCodes</a> allowing for dynamic content to be rendered using Markdown Syntax</p>
<pre data-lang="markdown" style="background-color:#191919;color:#f8f8f2;" class="language-markdown "><code class="language-markdown" data-lang="markdown"><span>{% chart__tree_map(name=&#39;first-map&#39;, min_height=200) %}
</span><span>- Root
</span><span>  - Backend Framework
</span><span>    - Django
</span><span>    - Rocket.rs
</span><span>  - Frontend Framework
</span><span>    - VueJS
</span><span>    - ReactJS
</span><span>{% end %}
</span></code></pre>
<p>What really impresses me though, is the interoperability of Rust &amp; Javascript/Typescript. Making it possible to embed more than one TreeMap in a single article. <code>name</code> has to be passed creating a new template with a new id</p>
<pre data-lang="javascript" style="background-color:#191919;color:#f8f8f2;" class="language-javascript "><code class="language-javascript" data-lang="javascript"><span style="color:#ff5e5e;">&lt;</span><span style="color:#e9fdac;">script id</span><span style="color:#ff5e5e;">=</span><span style="color:#ffffff;">&quot;</span><span style="color:#fbe3bf;">{{name}}-template</span><span style="color:#ffffff;">&quot; </span><span style="color:#e9fdac;">type</span><span style="color:#ff5e5e;">=</span><span style="color:#ffffff;">&quot;</span><span style="color:#fbe3bf;">text/template</span><span style="color:#ffffff;">&quot;</span><span style="color:#ff5e5e;">&gt;
</span><span style="color:#ff5e5e;">- </span><span style="color:#e9fdac;">Root
</span><span>  </span><span style="color:#ff5e5e;">- </span><span style="color:#e9fdac;">Backend Framework
</span><span>    </span><span style="color:#ff5e5e;">- </span><span style="color:#e9fdac;">Django
</span><span>    </span><span style="color:#ff5e5e;">- </span><span style="color:#e9fdac;">Rocket</span><span>.</span><span style="color:#e9fdac;">rs
</span><span>  </span><span style="color:#ff5e5e;">- </span><span style="color:#e9fdac;">Frontend Framework
</span><span>    </span><span style="color:#ff5e5e;">- </span><span style="color:#e9fdac;">VueJS
</span><span>    </span><span style="color:#ff5e5e;">- </span><span style="color:#e9fdac;">ReactJS
</span><span style="color:#ff5e5e;">&lt;/</span><span style="color:#e9fdac;">script</span><span style="color:#ff5e5e;">&gt;
</span><span>
</span><span style="color:#ff5e5e;">&lt;</span><span style="color:#e9fdac;">script type</span><span style="color:#ff5e5e;">=</span><span style="color:#ffffff;">&quot;</span><span style="color:#fbe3bf;">text/javascript</span><span style="color:#ffffff;">&quot;</span><span style="color:#ff5e5e;">&gt;
</span><span>  </span><span style="color:#8cdaff;">$</span><span>(document).</span><span style="color:#8cdaff;">ready</span><span>(</span><span style="color:#ff5e5e;">async </span><span style="font-style:italic;color:#fbdfb5;">function</span><span style="color:#ffffff;">() </span><span>{
</span><span>    </span><span style="color:#8cdaff;">$</span><span>(</span><span style="color:#ffffff;">&#39;</span><span style="color:#fbe3bf;">#{{name}}-chart</span><span style="color:#ffffff;">&#39;</span><span>).</span><span style="color:#8cdaff;">Chart__TreeMap</span><span>(</span><span style="color:#ffffff;">&#39;</span><span style="color:#fbe3bf;">{{name}}-template</span><span style="color:#ffffff;">&#39;</span><span>);
</span><span>  })
</span><span style="color:#ff5e5e;">&lt;/</span><span style="color:#e9fdac;">script</span><span style="color:#ff5e5e;">&gt;
</span></code></pre>
<p>Converting Markdown into JSON is a two step process. Parsing the content from the <code>&lt;script type="text/template"&gt;</code> tag into tokens using <a rel="noopener" target="_blank" href="https://github.com/markdown-it/markdown-it">markdown-it</a> and then passing the tokens into a javascript function that'll loop over all the tokens and builds a nested dictionary of information to be passed into echarts.</p>
<pre data-lang="javascript" style="background-color:#191919;color:#f8f8f2;" class="language-javascript "><code class="language-javascript" data-lang="javascript"><span style="color:#e9fdac;">$</span><span>.</span><span style="color:#e9fdac;">fn</span><span>.</span><span style="color:#8cdaff;">Chart__TreeMap </span><span style="color:#ff5e5e;">= async </span><span style="font-style:italic;color:#fbdfb5;">function</span><span style="color:#ffffff;">(</span><span style="font-style:italic;color:#fc9354;">name</span><span style="color:#ffffff;">) </span><span>{
</span><span>  </span><span style="font-style:italic;color:#fbdfb5;">const </span><span style="color:#e9fdac;">elm </span><span style="color:#ff5e5e;">= </span><span style="color:#8cdaff;">$</span><span>(</span><span style="color:#d699ff;">this</span><span>)[</span><span style="color:#fdb082;">0</span><span>];
</span><span>  </span><span style="font-style:italic;color:#fbdfb5;">const </span><span style="color:#e9fdac;">chart </span><span style="color:#ff5e5e;">= </span><span style="color:#e9fdac;">echarts</span><span>.</span><span style="color:#8cdaff;">init</span><span>(</span><span style="color:#e9fdac;">elm</span><span>);
</span><span>  </span><span style="font-style:italic;color:#fbdfb5;">const </span><span style="color:#e9fdac;">template_data </span><span style="color:#ff5e5e;">= </span><span style="color:#8cdaff;">$</span><span>(</span><span style="color:#ffffff;">`</span><span style="color:#fbe3bf;">#${</span><span style="color:#e9fdac;">name</span><span style="color:#fbe3bf;">}</span><span style="color:#ffffff;">`</span><span>);
</span><span>  </span><span style="font-style:italic;color:#fbdfb5;">const </span><span style="color:#e9fdac;">md </span><span style="color:#ff5e5e;">= new </span><span>markdownit();
</span><span>  </span><span style="font-style:italic;color:#fbdfb5;">const </span><span style="color:#e9fdac;">tokens </span><span style="color:#ff5e5e;">= </span><span style="color:#e9fdac;">md</span><span>.</span><span style="color:#6699cc;">parse</span><span>(</span><span style="color:#e9fdac;">template_data</span><span>[</span><span style="color:#fdb082;">0</span><span>].</span><span style="color:#e9fdac;">innerText</span><span>);
</span><span>  </span><span style="font-style:italic;color:#fbdfb5;">const </span><span style="color:#e9fdac;">options </span><span style="color:#ff5e5e;">= </span><span>{
</span><span>    series: {
</span><span>      </span><span style="color:#ff5e5e;">...</span><span>,
</span><span>      data: </span><span style="color:#8cdaff;">tokensToJson</span><span>(</span><span style="color:#e9fdac;">tokens</span><span>);
</span><span>    }
</span><span>  }
</span><span style="color:#ff5e5e;">...
</span></code></pre>
<p>Yay</p>
<div id="second-map-chart" style="width: 90%; min-height: 200px; margin-bottom: 10px;"></div>
<script id="second-map-template" type="text/template">
- Root
  - Category One
    - Technology One
    - Technology Two
  - Category Two
    - Technology Three
    - Category Three
      - Technology Four
      - Technology Five
</script>
<script type="text/javascript">
  $(document).ready(async function() {
    $('#second-map-chart').Chart__TreeMap('second-map-template');
  })
</script>
            </p>
          </section>
        </article>
        <div class="column is-12 show-on-mobile">
          <aside class="menu">
            
<p class="menu-label">Search</p>
<ul class="menu-list">
  <li>
    <div class="field">
      <div class="control has-icons-left has-icons-right">
        <input id="aside-search-input" class="input" type="text" placeholder="Search Articles" value="">
        <span class="icon is-small is-left">
          <i class="fa-solid fa-magnifying-glass"></i>
        </span>
        <span class="icon is-small is-right">
          <i class="fas fa-close"></i>
        </span>
      </div>
    </div>
  </li>
</ul>

            
<p class="menu-label">Article Filters</p>
<ul class="menu-list">


  <li>
    <a href="&#x2F;articles&#x2F;">Performance Analysis</a>
  </li>

</ul>

          </aside>
        </div>
      </div>
    </section>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VZP9H4GE0Y"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-VZP9H4GE0Y');
</script>
<script type="text/javascript" src="https://ender.yoga/elasticlunr.min.js" defer></script>
<script type="text/javascript" src="https://ender.yoga/search_index.en.js" defer></script>
<script type="text/javascript" src="https://ender.yoga/js.cookie-3.0.5.min.js" integrity="sha256-WCzAhd2P6gRJF9Hv3oOOd+hFJi/QJbv+Azn4CGB8gfY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://ender.yoga/MathJax-3.2.2.js" defer></script>
<script type="text/javascript" src="https://ender.yoga/chart/tree_map.js" defer></script>
<script type="text/javascript" src="https://ender.yoga/main.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/echarts@5.5.1/dist/echarts.min.js" integrity="sha256-6EJwvQzVvfYP78JtAMKjkcsugfTSanqe4WGFpUdzo88=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it@14.1.0/dist/markdown-it.min.js" integrity="sha256-OMcKHnypGrQOLZ5uYBKYUacX7Rx9Ssu91Bv5UDeRz2g=" crossorigin="anonymous"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script>

    <script type="text/javascript">
/// Debounce
function debounce(func, wait) {
  var timeout;
  return function () {
    var context = this;
    var args = arguments;
    clearTimeout(timeout);
    timeout = setTimeout(function () {
      timeout = null;
      func.apply(context, args);
    }, wait);
  };
}
function initAsideSearch() {
  const $aside_search_input = document.getElementById('aside-search-input');
  if($aside_search_input === null) {
    return;
  }
  $aside_search_input.addEventListener("keyup", debounce(async function($event) {
    if ($event.keyCode === 13 || $event.keyCode === 32) {
      var term = $aside_search_input.value.trim();
      if ($event.keyCode === 32) {
        term = term + " ";
      }
      const url_parts = [window.location.protocol, '//', window.location.host];
      if ("en" != "en") {
        url_parts.push('/en');
      }
      url_parts.push('/search/')
      const search_url = new URL(url_parts.join(''));
      search_url.searchParams.set('q', term);
      window.location.href = search_url;
    }
  }, 150));
}
if (document.readyState === "complete" || (document.readyState !== "loading" && !document.documentElement.doScroll)) {
  initAsideSearch();
} else {
  document.addEventListener("DOMContentLoaded", initAsideSearch);
} 
</script>

    <script type="text/javascript">
  $.fn.SubscribeField = function() {
    const COOKIE_NAME = 'subscribe-email';
    const elm = $(this);
    const regBttnElm = $("#subscribe-button");
    const noteElm = elm.find(".note");
    noteElm.hide();
    const setInvalid = function() {
      const newspaper_container = elm.find('.fa-newspaper').parent();
      newspaper_container.addClass('has-text-danger');
      // Right Icon
      const right_icon_container = elm.find('.icon.is-right');
      right_icon_container.addClass('has-text-danger');
      const right_icon = right_icon_container.find('i.fa-check');
      right_icon.removeClass('fa-check');
      right_icon.addClass('fa-close');
    }
    const setValid = function() {
      const newspaper_container = elm.find('.fa-newspaper').parent();
      newspaper_container.removeClass('has-text-danger');
      // Right Icon
      const right_icon_container = elm.find('.icon.is-right');
      right_icon_container.removeClass('has-text-danger');
      const right_icon = right_icon_container.find('i.fa-close');
      right_icon.removeClass('fa-close');
      right_icon.addClass('fa-check');
    }
    const setConfirmState = function(email) {
      const msg = `is been subscribed`;
      regBttnElm.find('button').text('Subscribed');
      regBttnElm.find('button').attr('disabled', 'disabled');
      elm.find('input[name=subscribe-email]').attr('disabled', 'disabled');
      elm.find('input[name=subscribe-email]').val(email);
      elm.find('.fa-newspaper').addClass('has-text-info');
      elm.find('.fa-check').parent().hide();
      // elm.find('.fa-check').parent().html('<span> Saved </span>');
      Cookies.set(COOKIE_NAME, email, { expires: 365, domain: window.location.hostname, SameSite: 'Strict', Secure: true });
    }
    const validateEmail = (email) => {
      return email.match(
        /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
      );
    }
    const handleKeyEvent = function($event) {
      const email = elm.find('input[name=subscribe-email]').val();
      if (validateEmail(email) == null) {
        setInvalid();
      } else {
        setValid();
        if ($event.originalEvent.keyCode == 13) {
          submitEmail();
        }
      }
    }
    // Handle Submission to Backend - ajax
    const submitEmail = function() {
      const email = elm.find('input[name=subscribe-email]').val();
      if (validateEmail(email) == null) {
        setInvalid();
        return;
      }
      const buildUrl = function (path) {
        if (window.location.hostname == 'localhost') {
          return `http://localhost:8200${path}`;
        } else if (window.location.hostname == 'jbcurtin.io') {
          return `https://newsletter.mlops-and-cloud-db.com${path}`;
        } else {
          console.error("Unable to build path");
        }
      }
      const handleSubmission = function(data) {
        setConfirmState(email);
      }
      const handleSubmissionError = function($event) {
        if ($event.responseText == "Success") {
          handleSubmission($event);
          return;
        }
        setInvalid();
      }
      $.ajax({
        type: 'POST',
        url: buildUrl('/nl/register'),
        data: `{ "email": "${email}" }`,
        success: handleSubmission,
        error: handleSubmissionError,
        contentType: "application/json",
        dataType: "json"
      });
    }
    // Attach Events
    setValid();
    // Detect Cookies
    if (Cookies.get(COOKIE_NAME) != undefined) {
      const email = Cookies.get(COOKIE_NAME);
      setConfirmState(email);
    } else {
      elm.find('input[name=subscribe-email]').on('keyup', handleKeyEvent);
      regBttnElm.on('click', function($event) {
        submitEmail();
        $event.preventDefault();
      });
    }
  }
  $(document).ready(() => {
    console.log('activate')
    $("#subscribe-field").SubscribeField();
  })
</script>

    <script type="text/javascript">
      gtag('set', 'content_group', '/articles');
      gtag('event', 'select_content', {
        'content_type': 'article',
        'content_id': '/articles/tree-map/'
      });
    </script>
  </body>
</html>